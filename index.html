 // API request parameters
      const startDate = "1970-01-01";
      const endDate = "2025-12-31";
      const apiUrl = `https://archive-api.open-meteo.com/v1/era5?latitude=${lat}&longitude=${lon}&start_date=${startDate}&end_date=${endDate}&daily=temperature_2m_min,temperature_2m_max,precipitation_sum&timezone=auto`;
      
      try {
        // Cancel any previous request
        if (currentRequest) {
          currentRequest.abort();
        }
        
        const controller = new AbortController();
        const signal = controller.signal;
        currentRequest = controller;
        
        // Step 1: Fetch data
        updateProgress(0, "Starting data retrieval...");
        
        // Simulate progress during fetch
        let fetchProgress = 0;
        const fetchInterval = setInterval(() => {
          if (fetchProgress < 95) {
            fetchProgress += 5;
            updateProgress(fetchProgress, `Fetching data... ${fetchProgress}%`);
          }
        }, 200);
        
        const response = await fetch(apiUrl, { signal });
        if (!response.ok) {
          let errorMessage = `API request failed with status ${response.status}`;
          try {
            const errorData = await response.json();
            if (errorData.reason) {
              errorMessage = errorData.reason;
            }
          } catch (e) {
            // Ignore JSON parse error
          }
          throw new Error(errorMessage);
        }
        
        const data = await response.json();
        
        // Clear interval immediately after fetch
        clearInterval(fetchInterval);
        updateProgress(100, "Data fetched!");
        
        showNotification("Climate data retrieved successfully! Generating report...", 'success');
        
        // Process data for charts and stats
        const processedData = processClimateData(data, lat, lon);
